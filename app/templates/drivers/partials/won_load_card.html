<div class="bg-gradient-to-br from-green-900/40 to-slate-900 rounded-xl border-l-4 border-green-500 p-4 shadow-xl">
    <div class="flex justify-between items-start mb-3">
        <div>
            <div class="text-green-400 text-xs font-bold uppercase">Load #{{ load.load_id }}</div>
            <div class="text-white text-sm">{{ load.origin }} â†’ {{ load.destination }}</div>
        </div>
        <div class="flex flex-col items-end gap-1">
            <div class="flex items-center gap-2">
                {% if load.unread_count and load.unread_count > 0 %}
                <span class="bg-red-500 text-white text-[10px] px-2 py-0.5 rounded-full animate-pulse font-bold">
                    {{ load.unread_count }} NEW REPLY{% if load.unread_count > 1 %}S{% endif %}
                </span>
                {% endif %}
                <span class="text-white font-mono text-sm">${{ "{:,.2f}".format(load.final_rate) }}</span>
            </div>
            {% if load.estimated_credits_candle and load.estimated_credits_candle > 0 %}
            <div class="text-[10px] text-green-400/90">
                <i class="fas fa-coins mr-0.5"></i>
                ~{{ "%.1f"|format(load.estimated_credits_candle) }} $CANDLE to earn
            </div>
            {% endif %}
        </div>
    </div>
    <div id="upload-result-{{ load.load_id }}" class="mt-3"></div>
    <form hx-post="/drivers/loads/{{ load.load_id }}/upload-document"
          hx-target="#upload-result-{{ load.load_id }}"
          hx-swap="innerHTML"
          hx-encoding="multipart/form-data"
          hx-indicator="#upload-spinner-{{ load.load_id }}"
          class="mt-3">
        <input type="hidden" name="doc_type" value="BOL" />
        <div class="flex gap-2 items-center">
            <label class="cursor-pointer inline-flex items-center gap-1.5 bg-green-700/80 hover:bg-green-600 text-white text-xs font-bold px-3 py-2 rounded-lg transition flex-1 justify-center">
                <i class="fas fa-file-upload"></i>
                <span>Upload BOL</span>
                <input type="file" name="file" accept="image/*,.pdf" class="hidden" required />
            </label>
            <button type="submit" class="bg-slate-700 hover:bg-slate-600 text-slate-300 text-xs font-bold px-3 py-2 rounded-lg transition">
                <i class="fas fa-paper-plane"></i> Send
            </button>
        </div>
        <div id="upload-spinner-{{ load.load_id }}" class="htmx-indicator text-slate-500 text-[10px] mt-1">
            <i class="fas fa-spinner fa-spin mr-1"></i> Processing...
        </div>
    </form>
    <div class="flex gap-2 mt-4">
        <a href="/drivers/loads/{{ load.load_id }}/manage" 
           class="flex-1 bg-green-600 hover:bg-green-500 text-white text-xs font-bold py-2 rounded-lg text-center transition flex items-center justify-center gap-2">
            <i class="fas fa-cog"></i>
            Manage
        </a>
        <a href="/drivers/terminal/{{ load.load_id }}" 
           class="flex-1 bg-slate-800 hover:bg-slate-700 border border-slate-700 text-slate-300 text-xs font-bold py-2 rounded-lg text-center transition flex items-center justify-center gap-2">
            <i class="fas fa-terminal"></i>
            Terminal
        </a>
    </div>
</div>
